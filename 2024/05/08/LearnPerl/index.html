<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.1.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"wangxianke123.github.io","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="Per 语言的学习记录，主要记录一些Per语言的学习笔记。教材用的是骆驼书第6版。">
<meta property="og:type" content="article">
<meta property="og:title" content="LearnPerl">
<meta property="og:url" content="https://wangxianke123.github.io/2024/05/08/LearnPerl/index.html">
<meta property="og:site_name" content="花间一壶酒">
<meta property="og:description" content="Per 语言的学习记录，主要记录一些Per语言的学习笔记。教材用的是骆驼书第6版。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://wangxianke123.github.io/2024/05/08/LearnPerl/image.png">
<meta property="og:image" content="https://wangxianke123.github.io/2024/05/08/LearnPerl/image2.png">
<meta property="og:image" content="https://wangxianke123.github.io/2024/05/08/LearnPerl/image1.png">
<meta property="og:image" content="https://wangxianke123.github.io/2024/05/08/LearnPerl/image-1.png">
<meta property="og:image" content="https://wangxianke123.github.io/2024/05/08/LearnPerl/image-2.png">
<meta property="og:image" content="https://wangxianke123.github.io/2024/05/08/LearnPerl/image-3.png">
<meta property="og:image" content="https://wangxianke123.github.io/2024/05/08/LearnPerl/image-5.png">
<meta property="og:image" content="https://wangxianke123.github.io/2024/05/08/LearnPerl/image-7.png">
<meta property="og:image" content="https://wangxianke123.github.io/2024/05/08/LearnPerl/image-9.png">
<meta property="og:image" content="https://wangxianke123.github.io/2024/05/08/LearnPerl/image-10.png">
<meta property="og:image" content="https://wangxianke123.github.io/2024/05/08/LearnPerl/image-11.png">
<meta property="og:image" content="https://wangxianke123.github.io/2024/05/08/LearnPerl/image-13.png">
<meta property="og:image" content="https://wangxianke123.github.io/2024/05/08/LearnPerl/image-14.png">
<meta property="og:image" content="https://wangxianke123.github.io/2024/05/08/LearnPerl/image-15.png">
<meta property="og:image" content="https://wangxianke123.github.io/2024/05/08/LearnPerl/image-16.png">
<meta property="og:image" content="https://wangxianke123.github.io/2024/05/08/LearnPerl/image-17.png">
<meta property="og:image" content="https://wangxianke123.github.io/2024/05/08/LearnPerl/image-19.png">
<meta property="og:image" content="https://wangxianke123.github.io/2024/05/08/LearnPerl/image-18.png">
<meta property="og:image" content="https://wangxianke123.github.io/2024/05/08/LearnPerl/image-20.png">
<meta property="og:image" content="https://wangxianke123.github.io/2024/05/08/LearnPerl/image-21.png">
<meta property="og:image" content="https://wangxianke123.github.io/2024/05/08/LearnPerl/image-22.png">
<meta property="og:image" content="https://wangxianke123.github.io/2024/05/08/LearnPerl/image-24.png">
<meta property="og:image" content="https://wangxianke123.github.io/2024/05/08/LearnPerl/image-25.png">
<meta property="og:image" content="https://wangxianke123.github.io/2024/05/08/LearnPerl/image-26.png">
<meta property="og:image" content="https://wangxianke123.github.io/2024/05/08/LearnPerl/image-27.png">
<meta property="og:image" content="https://wangxianke123.github.io/2024/05/08/LearnPerl/image-28.png">
<meta property="og:image" content="https://wangxianke123.github.io/2024/05/08/LearnPerl/image-29.png">
<meta property="og:image" content="https://wangxianke123.github.io/2024/05/08/LearnPerl/image-30.png">
<meta property="og:image" content="https://wangxianke123.github.io/2024/05/08/LearnPerl/image-31.png">
<meta property="og:image" content="https://wangxianke123.github.io/2024/05/08/LearnPerl/image-32.png">
<meta property="og:image" content="https://wangxianke123.github.io/2024/05/08/LearnPerl/image-33.png">
<meta property="og:image" content="https://wangxianke123.github.io/2024/05/08/LearnPerl/image-34.png">
<meta property="og:image" content="https://wangxianke123.github.io/2024/05/08/LearnPerl/image-35.png">
<meta property="og:image" content="https://wangxianke123.github.io/2024/05/08/LearnPerl/image-36.png">
<meta property="og:image" content="https://wangxianke123.github.io/2024/05/08/LearnPerl/image-37.png">
<meta property="og:image" content="https://wangxianke123.github.io/2024/05/08/LearnPerl/image-38.png">
<meta property="og:image" content="https://wangxianke123.github.io/2024/05/08/LearnPerl/image-39.png">
<meta property="og:image" content="https://wangxianke123.github.io/2024/05/08/LearnPerl/image-40.png">
<meta property="og:image" content="https://wangxianke123.github.io/2024/05/08/LearnPerl/image-41.png">
<meta property="og:image" content="https://wangxianke123.github.io/2024/05/08/LearnPerl/image-42.png">
<meta property="og:image" content="https://wangxianke123.github.io/2024/05/08/LearnPerl/image-43.png">
<meta property="og:image" content="https://wangxianke123.github.io/2024/05/08/LearnPerl/image-44.png">
<meta property="og:image" content="https://wangxianke123.github.io/2024/05/08/LearnPerl/image-45.png">
<meta property="og:image" content="https://wangxianke123.github.io/2024/05/08/LearnPerl/image-46.png">
<meta property="og:image" content="https://wangxianke123.github.io/2024/05/08/LearnPerl/image-47.png">
<meta property="og:image" content="https://wangxianke123.github.io/2024/05/08/LearnPerl/image-48.png">
<meta property="og:image" content="https://wangxianke123.github.io/2024/05/08/LearnPerl/image-49.png">
<meta property="og:image" content="https://wangxianke123.github.io/2024/05/08/LearnPerl/image-51.png">
<meta property="og:image" content="https://wangxianke123.github.io/2024/05/08/LearnPerl/image-53.png">
<meta property="og:image" content="https://wangxianke123.github.io/2024/05/08/LearnPerl/image-54.png">
<meta property="og:image" content="https://wangxianke123.github.io/2024/05/08/LearnPerl/image-55.png">
<meta property="og:image" content="https://wangxianke123.github.io/2024/05/08/LearnPerl/image-56.png">
<meta property="og:image" content="https://wangxianke123.github.io/2024/05/08/LearnPerl/image-57.png">
<meta property="og:image" content="https://wangxianke123.github.io/2024/05/08/LearnPerl/image-58.png">
<meta property="og:image" content="https://wangxianke123.github.io/2024/05/08/LearnPerl/image-59.png">
<meta property="og:image" content="https://wangxianke123.github.io/2024/05/08/LearnPerl/image-60.png">
<meta property="og:image" content="https://wangxianke123.github.io/2024/05/08/LearnPerl/image-61.png">
<meta property="og:image" content="https://wangxianke123.github.io/2024/05/08/LearnPerl/image-62.png">
<meta property="article:published_time" content="2024-05-08T05:56:47.000Z">
<meta property="article:modified_time" content="2024-07-02T14:35:54.136Z">
<meta property="article:author" content="Wang xianke">
<meta property="article:tag" content="Programming Language">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://wangxianke123.github.io/2024/05/08/LearnPerl/image.png">

<link rel="canonical" href="https://wangxianke123.github.io/2024/05/08/LearnPerl/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>LearnPerl | 花间一壶酒</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>


  <script src="https://cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome/css/font-awesome.min.css">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>
    
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">花间一壶酒</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">举杯邀明月，对影成三人</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://wangxianke123.github.io/2024/05/08/LearnPerl/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Wang xianke">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="花间一壶酒">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          LearnPerl
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2024-05-08 13:56:47" itemprop="dateCreated datePublished" datetime="2024-05-08T13:56:47+08:00">2024-05-08</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-07-02 22:35:54" itemprop="dateModified" datetime="2024-07-02T22:35:54+08:00">2024-07-02</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/notes/" itemprop="url" rel="index"><span itemprop="name">notes</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>22k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>41 分钟</span>
            </span>
            <div class="post-description">Per 语言的学习记录，主要记录一些Per语言的学习笔记。教材用的是骆驼书第6版。</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="Learn-Perl"><a href="#Learn-Perl" class="headerlink" title="Learn Perl"></a>Learn Perl</h1><h2 id="ch2-标量数据"><a href="#ch2-标量数据" class="headerlink" title="ch2 标量数据"></a>ch2 标量数据</h2><h3 id="第一个Helloword-程序"><a href="#第一个Helloword-程序" class="headerlink" title="第一个Helloword 程序"></a>第一个Helloword 程序</h3><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#! /usr/bin/perl</span></span><br><span class="line"><span class="keyword">print</span> <span class="string">&quot;Hello, world!\n&quot;</span>;</span><br></pre></td></tr></table></figure>

<p>perl是一种脚本语言，一般已经被内置在类unix系统中。类似的还有shell，bash,csh,tcl,python等。</p>
<p>第一行的<code>#!</code>读作shell bang。shell bang 是一个用于指定脚本解释器的特殊字符组合。它由 <code>#</code>（井号）和 <code>!</code>（感叹号）组合而成，通常位于脚本的第一行。当一个脚本被执行时，系统会参考 shebang 指定的解释器来执行这个脚本。</p>
<p>例如，如果一个脚本的第一行是 <code>#!/bin/bash</code>，那么这个脚本就会使用 Bash 作为其解释器。如果改为 <code>#!/usr/bin/python3</code>，那么这个脚本就会使用 Python 3 作为其解释器。</p>
<p>linux默认的脚本解释器总是在&#x2F;usr&#x2F;bin目录下，如果解释器安装在其他目录下，则需要修改对应的路径。</p>
<p>由于有shell bang的存在，perl程序不需要有特定的扩展名，而只需要是<strong>可执行</strong>的。（为了区分可以加上<code>.pl</code>）的后缀。</p>
<p>此外也可以直接通过<code>perl</code>命令执行脚本。这2种方式大部分情况下是相同的，然而有时候也会产生不同的效果。</p>
<p><img src="/2024/05/08/LearnPerl/image.png"><br>目前本人还没搞清楚这种情况出现的原因。</p>
<p>反引号&#96;&#96;可以用于执行外部命令:</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#! /usr/bin/perl</span></span><br><span class="line"> @lines = <span class="string">`ls -a`</span>;</span><br><span class="line"> <span class="keyword">foreach</span> (@lines) &#123;</span><br><span class="line">  <span class="keyword">print</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h3 id="标量数据"><a href="#标量数据" class="headerlink" title="标量数据"></a>标量数据</h3><p>字符串，数字都被看做标量数据。</p>
<p>perl会根据数据的操作符判断执行代数运算还是字符串操作。</p>
<p>变量采用美元符号声明：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#! /usr/bin/perl</span></span><br><span class="line"><span class="keyword">use</span> v5.<span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">$alef  = <span class="keyword">chr</span>( <span class="number">0x05D0</span> );</span><br><span class="line">$alpha = <span class="keyword">chr</span>( <span class="keyword">hex</span>(<span class="string">&#x27;03B1&#x27;</span>) );</span><br><span class="line">$omega = <span class="keyword">chr</span>( <span class="number">0x03C9</span> );</span><br><span class="line"></span><br><span class="line"><span class="keyword">say</span> <span class="string">&quot;alpha:&quot;</span>.$alpha;</span><br><span class="line"><span class="keyword">say</span> <span class="string">&quot;alef:&quot;</span>.$alef;</span><br><span class="line"><span class="keyword">say</span> <span class="string">&quot;omega:&quot;</span>.$omega;</span><br><span class="line"></span><br><span class="line">$code_point = <span class="keyword">ord</span>( <span class="string">&#x27;א&#x27;</span> );</span><br><span class="line"></span><br><span class="line"><span class="keyword">say</span> $code_point;</span><br></pre></td></tr></table></figure>
<p><img src="/2024/05/08/LearnPerl/image2.png"><br>chr函数会将对应的ascii字符进行转换。ord则相反。</p>
<p>使用<code>x</code>可以将字符串重复对应的次数。</p>
<p><img src="/2024/05/08/LearnPerl/image1.png"></p>
<p><code>say</code>和<code>print</code>类似，区别是会自动换行。（需要5.10以上的版本）</p>
<p>使用<code>.</code>可以连接2个字符串。</p>
<h3 id="其他特性"><a href="#其他特性" class="headerlink" title="其他特性"></a>其他特性</h3><p>获取标准输入：<code>&lt;STDIN&gt;</code></p>
<p><img src="/2024/05/08/LearnPerl/image-1.png"></p>
<p><img src="/2024/05/08/LearnPerl/image-2.png"></p>
<p><code>chomp</code>的作用是去掉字符串末尾的换行符。</p>
<h2 id="ch3-列表和数组"><a href="#ch3-列表和数组" class="headerlink" title="ch3 列表和数组"></a>ch3 列表和数组</h2><p>列表(list)和数组(array)都用于表示多个变量。二者的区别在于，“列表”是数据的集合，而“数组”是存储列表的变量。即列表更倾向于数据，数组更倾向于变量。列表不一定放在数组里，而数组中一定保护列表。</p>
<h3 id="数组array"><a href="#数组array" class="headerlink" title="数组array"></a>数组array</h3><p>数组和标量的声明方式完全相同。</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#! /usr/bin/perl</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> v5.<span class="number">10</span>;</span><br><span class="line">$word[<span class="number">0</span>]= <span class="string">&quot;s&quot;</span>;</span><br><span class="line">$word[<span class="number">1</span>]= <span class="string">&quot;j&quot;</span>;</span><br><span class="line">$word[<span class="number">2</span>]= <span class="string">&quot;t&quot;</span>;</span><br><span class="line">$word[<span class="number">3</span>]= <span class="string">&quot;uuu&quot;</span>;</span><br><span class="line"></span><br><span class="line">$word[<span class="number">18</span>]=<span class="string">&quot;end&quot;</span>;</span><br><span class="line">$end = $#word;</span><br><span class="line"></span><br><span class="line"><span class="keyword">say</span> $end;</span><br><span class="line"><span class="keyword">say</span> $word;</span><br><span class="line"><span class="keyword">say</span>  $word[-<span class="number">19</span>].$word[-<span class="number">18</span>].$word[-<span class="number">17</span>].$word[-<span class="number">16</span>];</span><br><span class="line"><span class="keyword">say</span> @word</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><img src="/2024/05/08/LearnPerl/image-3.png"></p>
<p>‘#’井号代表取数组的最后一个下标值，除了正着数，数组下标也可以用来倒数，如第三行所示。</p>
<p>第二行的输出为空，是因为$word被看作是一个标量，与数组不同，由于没有对这个标量赋值，所以输出为空。如果向输出列表的完整值，则应该使用@符号：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">say</span> @word;</span><br></pre></td></tr></table></figure>
<p>使用超过原本数组长度的数组进行赋值会自动扩充数组，中间的元素被的值为undef</p>
<h3 id="array"><a href="#array" class="headerlink" title="array"></a>array</h3><h4 id="push-pop-shift-unshift"><a href="#push-pop-shift-unshift" class="headerlink" title="push,pop,shift,unshift"></a>push,pop,shift,unshift</h4><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#! /usr/bin/perl</span></span><br><span class="line"><span class="keyword">use</span> v5.<span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">@a=(<span class="number">1.7</span>..<span class="number">5.7</span>);</span><br><span class="line"><span class="keyword">say</span> @a;</span><br><span class="line">($a,$b,$c) = <span class="string">qw(apple pear banana)</span>;</span><br><span class="line"><span class="keyword">say</span> $a.$b.$c;</span><br><span class="line"></span><br><span class="line"><span class="comment"># qw means quoted word</span></span><br><span class="line">@mylist = <span class="keyword">qw</span>/</span><br><span class="line">s</span><br><span class="line">j</span><br><span class="line">t</span><br><span class="line">u  a b c</span><br><span class="line">/;</span><br><span class="line"></span><br><span class="line"><span class="keyword">say</span> <span class="keyword">pop</span> @mylist;</span><br><span class="line"><span class="keyword">say</span> @mylist;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">@list = <span class="number">1</span>..<span class="number">7</span>;</span><br><span class="line"><span class="keyword">push</span> @list, <span class="number">3</span>;</span><br><span class="line"><span class="keyword">say</span> $list[-<span class="number">1</span>];</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">say</span> <span class="keyword">shift</span> @list;</span><br><span class="line"><span class="keyword">say</span> @list;</span><br><span class="line"></span><br><span class="line"><span class="keyword">unshift</span> @list,<span class="number">0</span>;</span><br><span class="line"><span class="keyword">say</span> @list[<span class="number">0</span>];</span><br><span class="line"><span class="keyword">say</span> @list</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/2024/05/08/LearnPerl/image-5.png"></p>
<p>第一种的<code>..</code>表示递增，但是只能以整数方式进行。</p>
<p>第二行的示例显示了一种将列表的值赋值给变量的方法。</p>
<p>qw的意思为”quoted words”可以用来省略字符串中的引号。使用qw后，空格或换号符都可以之间作为字符串的分隔。</p>
<p>push和pop类似于其他语法中的列表操作。需要注意的是对列表用$还是@效果都是一样的。</p>
<p>shift和unshift对列表头进行操作，相当于pop_front和push_front。</p>
<h4 id="splice"><a href="#splice" class="headerlink" title="splice"></a>splice</h4><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/perl</span></span><br><span class="line"><span class="keyword">use</span> v5.<span class="number">10</span>;</span><br><span class="line">@school = <span class="keyword">qw</span>/</span><br><span class="line">S</span><br><span class="line">J</span><br><span class="line">T</span><br><span class="line">U</span><br><span class="line">G</span><br><span class="line">G/;</span><br><span class="line"></span><br><span class="line">@remove = <span class="keyword">splice</span> @school,<span class="number">0</span>,<span class="number">4</span>;</span><br><span class="line"><span class="keyword">say</span> @remove;</span><br><span class="line"><span class="keyword">say</span> @school;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">@remove = <span class="keyword">splice</span> @school, <span class="number">0</span>,<span class="number">0</span>,<span class="keyword">qw</span>/D D/;</span><br><span class="line"><span class="keyword">say</span> @remove;</span><br><span class="line"><span class="keyword">say</span> @school;</span><br></pre></td></tr></table></figure>

<p><img src="/2024/05/08/LearnPerl/image-7.png"></p>
<p>splice最多可以接收4个参数，后面2个可以省略。其中第一个参数表示要操作的列表，第二个参数表示分割的起始索引位置，第三个参数表示分割的长度，第四个参数表示分割后插入的元素。插入的位置在被分割的起始位置。</p>
<p>如果第3个参数设置为0，则splice可以被当作插入函数在第二个参数指定的位置进行插入。</p>
<h4 id="字符串数组内插"><a href="#字符串数组内插" class="headerlink" title="字符串数组内插"></a>字符串数组内插</h4><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/perl</span></span><br><span class="line"><span class="keyword">use</span> v5.<span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">@seasons= <span class="keyword">qw</span>\spring summer autumn <span class="keyword">and</span> winter.\;</span><br><span class="line"></span><br><span class="line"><span class="keyword">say</span> <span class="string">&quot;I miss you in @seasons&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">say</span> <span class="string">&quot;This is a reall hot $seasons[1]&quot;</span>;</span><br></pre></td></tr></table></figure>

<p><img src="/2024/05/08/LearnPerl/image-9.png"></p>
<p>使用对应的索引或者完整的数组引用可以对字符串实现内插操作。如果希望使用原本的@符号或者[],则需要在前面加上反斜杠\进行转义。</p>
<h4 id="foreach"><a href="#foreach" class="headerlink" title="foreach"></a>foreach</h4><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/perl</span></span><br><span class="line"><span class="keyword">use</span> v5.<span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">$letter = <span class="string">&#x27;s&#x27;</span>;</span><br><span class="line"></span><br><span class="line">@alph =<span class="string">qw(b d p l m n z)</span>;</span><br><span class="line"><span class="keyword">foreach</span> $letter (@alph) &#123;</span><br><span class="line">    $letter .=<span class="string">&quot;a\n&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">say</span> <span class="string">&quot;alph is now:&quot;</span>,@alph;</span><br><span class="line"></span><br><span class="line"><span class="keyword">say</span> <span class="string">&quot;letter is still: $letter\n&quot;</span>;</span><br></pre></td></tr></table></figure>

<p>foreach语句用于遍历列表元素，并且对应用来遍历的临时变量，不用担心其与已有的标量重名。</p>
<h4 id="默认变量"><a href="#默认变量" class="headerlink" title="默认变量 $_"></a>默认变量 $_</h4><p>对于不指定变量的操作，统一使用默认变量$_:</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/perl</span></span><br><span class="line"><span class="keyword">use</span> v5.<span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">foreach</span> (<span class="number">1</span>..<span class="number">10</span>)&#123;</span><br><span class="line">    <span class="keyword">say</span> <span class="string">&quot;I can count to $_!&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$_ = <span class="string">&quot;makabaka&quot;</span>;</span><br><span class="line"><span class="keyword">say</span>;</span><br></pre></td></tr></table></figure>
<p><img src="/2024/05/08/LearnPerl/image-10.png"></p>
<h4 id="reverse-sort-each"><a href="#reverse-sort-each" class="headerlink" title="reverse,sort,each"></a>reverse,sort,each</h4><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/perl</span></span><br><span class="line"><span class="keyword">use</span> v5.<span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">@a=<span class="number">1</span>..<span class="number">10</span>;</span><br><span class="line">@b = <span class="keyword">reverse</span> @a;</span><br><span class="line"></span><br><span class="line"><span class="keyword">say</span> @a;</span><br><span class="line"><span class="keyword">say</span> @b;</span><br><span class="line"></span><br><span class="line"><span class="keyword">say</span> <span class="keyword">sort</span> @b;</span><br><span class="line"></span><br><span class="line"><span class="keyword">my</span> @rocks =<span class="keyword">qw</span>/bedrock slate rubble granite /;</span><br><span class="line"><span class="keyword">while</span>(<span class="keyword">my</span> ($index,$value)=<span class="keyword">each</span> @rocks )&#123;</span><br><span class="line">    <span class="keyword">say</span> <span class="string">&quot;$index:$value&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/2024/05/08/LearnPerl/image-11.png"></p>
<p>reverse用于将列表反转。<br>sort用于排序。排序规则是根据首字母的assicii值，并以此类推(首字母相同则比较下一个字母).</p>
<p>each可以创建索引和元素的键值对。</p>
<p><code>my</code> 关键字用于声明局部变量，使得这些变量的作用域仅限于其声明的代码块内。在你的代码中，<code>my</code> 用来声明 <code>$index</code> 和 <code>$value</code>，以便在 <code>while</code> 循环的每次迭代中使用它们来存储当前的索引和值。</p>
<h4 id="列表上下文与标量上下文"><a href="#列表上下文与标量上下文" class="headerlink" title="列表上下文与标量上下文"></a>列表上下文与标量上下文</h4><p>对于列表变量，由于其有多个属性，如里面的元素，元素的个数等，因此perl设计在引用列表变量时，不同的上下文环境中，列表变量的返回值不同。</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/perl</span></span><br><span class="line"><span class="keyword">use</span> v5.<span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">@people = <span class="keyword">qw</span>/ fred barney betty /;</span><br><span class="line"></span><br><span class="line">@sorted = <span class="keyword">sort</span> @people;</span><br><span class="line">$number = <span class="number">42</span>+@people;</span><br><span class="line"></span><br><span class="line"><span class="keyword">say</span> $number;</span><br><span class="line"><span class="keyword">say</span> @sorted;</span><br><span class="line"></span><br><span class="line">$backward=<span class="keyword">reverse</span> @people;</span><br><span class="line"><span class="keyword">say</span> $backward;</span><br></pre></td></tr></table></figure>

<p><img src="/2024/05/08/LearnPerl/image-13.png"></p>
<p>@people第一次调用时为列表上下文，返回列表中的所有元素进行排序。第二次由于与一个标量做加法，返回了列表的元素个数3。第三次调用reverse后复制给一个标量，因此返回了列表中所有元素合并而成的字符串。</p>
<p><img src="/2024/05/08/LearnPerl/image-14.png"></p>
<h4 id="列表上下文中使用标量表达式-强制标量上下文"><a href="#列表上下文中使用标量表达式-强制标量上下文" class="headerlink" title="列表上下文中使用标量表达式&amp;强制标量上下文"></a>列表上下文中使用标量表达式&amp;强制标量上下文</h4><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/perl</span></span><br><span class="line"><span class="keyword">use</span> v5.<span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">@fred = <span class="number">6</span>*<span class="number">7</span>;</span><br><span class="line">@barney = <span class="string">&quot;hello&quot;</span>.<span class="string">&quot; &quot;</span>.<span class="string">&quot;world&quot;</span>;</span><br><span class="line"><span class="keyword">say</span> @fred;</span><br><span class="line"><span class="keyword">say</span> @barney;</span><br><span class="line"></span><br><span class="line">@wilma = <span class="keyword">undef</span>;</span><br><span class="line"><span class="keyword">say</span> <span class="keyword">scalar</span> @wilma;</span><br><span class="line"></span><br><span class="line">@betty = ();</span><br><span class="line"><span class="keyword">say</span> <span class="keyword">scalar</span> @betty;</span><br></pre></td></tr></table></figure>

<p><img src="/2024/05/08/LearnPerl/image-15.png"></p>
<p>前两行将一个标量复制给列表，实际上得到了只含有一个元素的列表。</p>
<p>saclar是一个伪函数，其作用是告诉解释器使用标量上下文。<br>此外，清空列表应该使用(),因为undef本身是一个标量，如果将其复制给列表，将得到只含有一个“undef”元素的列表，而非一个空列表；</p>
<h4 id="列表上下文中的"><a href="#列表上下文中的" class="headerlink" title="列表上下文中的&lt;STDIN&gt;"></a>列表上下文中的&lt;STDIN&gt;</h4><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/perl</span></span><br><span class="line"><span class="keyword">use</span> v5.<span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">chomp</span>(@list = &lt;STDIN&gt;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">say</span> <span class="string">&quot;Got list:@list&quot;</span>;</span><br></pre></td></tr></table></figure>

<p>将标准输入流赋值给列表变量，每次回车后输入新元素，使用ctrl+D来告诉程序输入结束。</p>
<p><img src="/2024/05/08/LearnPerl/image-16.png"></p>
<h3 id="习题"><a href="#习题" class="headerlink" title="习题"></a>习题</h3><p><img src="/2024/05/08/LearnPerl/image-17.png"></p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/perl</span></span><br><span class="line"><span class="keyword">use</span> v5.<span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">chomp</span>(@list = &lt;STDIN&gt;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">say</span> <span class="keyword">reverse</span> @list;</span><br></pre></td></tr></table></figure>
<p><img src="/2024/05/08/LearnPerl/image-19.png" alt="alt text"></p>
<p><img src="/2024/05/08/LearnPerl/image-18.png"></p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#! /usr/bin/perl</span></span><br><span class="line"><span class="keyword">use</span> v5.<span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">@name = <span class="keyword">qw</span> /fred betty barney dino wilma pebbles bamm-bamm /;</span><br><span class="line"></span><br><span class="line"><span class="keyword">chomp</span>(@numbers = &lt;STDIN&gt;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">foreach</span> $number (@numbers)&#123;</span><br><span class="line">    <span class="keyword">if</span> (@name[$number])&#123;</span><br><span class="line">        <span class="keyword">say</span> @name[$number];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2024/05/08/LearnPerl/image-20.png"></p>
<p><img src="/2024/05/08/LearnPerl/image-21.png"></p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#! /usr/bin/perl</span></span><br><span class="line"><span class="keyword">use</span> v5.<span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">@list = &lt;STDIN&gt;;</span><br><span class="line"></span><br><span class="line">@sorted = <span class="keyword">sort</span> @list;</span><br><span class="line"></span><br><span class="line"><span class="keyword">say</span> @sorted;</span><br><span class="line"><span class="keyword">chomp</span>(@sorted);</span><br><span class="line"><span class="keyword">say</span> @sorted;</span><br></pre></td></tr></table></figure>
<p><img src="/2024/05/08/LearnPerl/image-22.png"></p>
<h2 id="ch4-子程序"><a href="#ch4-子程序" class="headerlink" title="ch4 子程序"></a>ch4 子程序</h2><p>Perl语言支持用户自定义的子程序：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#! /usr/bin/perl</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> v5.<span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">sub</span> <span class="title">marine</span> </span>&#123;</span><br><span class="line"> $n += <span class="number">1</span>; <span class="comment"># Global variable $n</span></span><br><span class="line"> <span class="keyword">print</span> <span class="string">&quot;Hello, sailor number $n!\n&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&amp;marine; <span class="comment"># says Hello, sailor number 1!</span></span><br><span class="line">&amp;marine; <span class="comment"># says Hello, sailor number 2!</span></span><br><span class="line">&amp;marine; <span class="comment"># says Hello, sailor number 3!</span></span><br><span class="line">&amp;marine; <span class="comment"># says Hello, sailor number 4!</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">sub</span> <span class="title">sum_of_fred_and_barney</span> </span>&#123;</span><br><span class="line"> <span class="keyword">print</span> <span class="string">&quot;Hey, you called the sum_of_fred_and_barney subroutine!\n&quot;</span>;</span><br><span class="line"> $fred + $barney; <span class="comment"># That&#x27;s the return value</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$fred = <span class="number">3</span>;</span><br><span class="line">$barney = <span class="number">4</span>;</span><br><span class="line">$wilma = &amp;sum_of_fred_and_barney; <span class="comment"># $wilma gets 7</span></span><br><span class="line"><span class="keyword">print</span> <span class="string">&quot;\$wilma is $wilma.\n&quot;</span>;</span><br><span class="line">$betty = <span class="number">3</span> * &amp;sum_of_fred_and_barney; <span class="comment"># $betty gets 21</span></span><br><span class="line"><span class="keyword">print</span> <span class="string">&quot;\$betty is $betty.\n&quot;</span>;</span><br></pre></td></tr></table></figure>

<p>上述程序中，sub用于定义函数名。同时我们可以注意到，如果不加限定，子程序中定义的变量是全剧变量。</p>
<p>此外，Perl的所有函数都默认含有返回值。并且返回值是子程序中最后一次进行解析的元素。</p>
<p>需要注意的是，返回值一定是<strong>最后一次进行解析的元素</strong>，如果最后一行语句是类似Print这样的调用，那么返回值为1.</p>
<p>下面的例子中：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">sub</span> <span class="title">larger_of_fred_or_barney</span> </span>&#123;</span><br><span class="line"> <span class="keyword">if</span> ($fred &gt; $barney) &#123;</span><br><span class="line"> $fred;</span><br><span class="line"> &#125; <span class="keyword">else</span> &#123;</span><br><span class="line"> $barney;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>返回的是比较操作的最大值，而不是最后一行。</p>
<h4 id="变量传递"><a href="#变量传递" class="headerlink" title="变量传递"></a>变量传递</h4><p>调用函数时，很多场景下需要传递变量。</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#! /usr/bin/perl</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> v5.<span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">sub</span> <span class="title">max</span> </span>&#123;</span><br><span class="line"> <span class="comment"># Compare this to &amp;larger_of_fred_or_barney</span></span><br><span class="line"><span class="keyword">if</span> ($_[<span class="number">0</span>] &gt; $_[<span class="number">1</span>]) &#123;</span><br><span class="line">    $_[<span class="number">0</span>];&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">    $_[<span class="number">1</span>];&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">say</span> &amp;max(<span class="number">7</span>,-<span class="number">9</span>,<span class="number">8</span>);</span><br><span class="line"><span class="keyword">say</span> &amp;max;</span><br></pre></td></tr></table></figure>
<p><img src="/2024/05/08/LearnPerl/image-24.png"></p>
<p>在子程序中，默认调用$_作为参数数组，这个数字是一个局部变量。此外，Perl并不会检查调用时传递的参数是否符合设计时的预期，即使传递多余的变量或空的变量数组，子程序也能运行。</p>
<h4 id="子程序中的私有变量"><a href="#子程序中的私有变量" class="headerlink" title="子程序中的私有变量"></a>子程序中的私有变量</h4><p>如前所述，perl中的任何变量都默认为全局变量，而<code>my</code>关键字可以定义局部变量，也称词法变量(lexical variables)。局部变量被限制在最近封闭块{}或文件中。</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">sub</span> <span class="title">max</span> </span>&#123;</span><br><span class="line"> <span class="keyword">my</span>($m, $n); <span class="comment"># new, private variables for this block</span></span><br><span class="line"> ($m, $n) = @_; <span class="comment"># give names to the parameters</span></span><br><span class="line"> <span class="keyword">if</span> ($m &gt; $n) &#123; $m &#125; <span class="keyword">else</span> &#123; $n &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>由于Perl的设计原则是，<strong>如无必要，不设限制</strong>，因此函数的变量列表是十分自由的，一个更好的Max函数设计如下：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#! /usr/bin/perl</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> v5.<span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">$maximum = &amp;max(<span class="number">3</span>, <span class="number">5</span>, <span class="number">10</span>, <span class="number">4</span>, <span class="number">6</span>);</span><br><span class="line"><span class="keyword">say</span> $maximum;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">sub</span> <span class="title">max</span> </span>&#123;</span><br><span class="line"> <span class="keyword">my</span>($max_so_far) = <span class="keyword">shift</span> @_; <span class="comment"># the first one is the largest yet seen</span></span><br><span class="line"> <span class="keyword">foreach</span> (@_) &#123; <span class="comment"># look at the remaining arguments</span></span><br><span class="line"> <span class="keyword">if</span> ($_ &gt; $max_so_far) &#123; <span class="comment"># could this one be bigger yet?</span></span><br><span class="line"> $max_so_far = $_;</span><br><span class="line"> &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> $max_so_far;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/2024/05/08/LearnPerl/image-25.png"></p>
<p>同时我们可以注意到，子程序不一定要先定义后调用，而是可以在调用之后定义。</p>
<p>此外需要注意的是，<code>my</code>关键字通常只定义它后面的一个变量，除非加上括号：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">my</span> $fred, $barney; <span class="comment"># WRONG! Fails to declare $barney</span></span><br><span class="line"><span class="keyword">my</span>($fred, $barney); <span class="comment"># declares both</span></span><br></pre></td></tr></table></figure>

<p>如果没有<code>&#123;&#125;</code>这样的封闭块，那么文件本身被看作一个封闭块。不同文件中的同名变量是不同的局部变量。</p>
<h4 id="use-strict-编译指令"><a href="#use-strict-编译指令" class="headerlink" title="use strict 编译指令"></a>use strict 编译指令</h4><p>由于Perl的语法限制过于宽松，有时可能会导致大型程序的错误难以定位。此时可以通过<code>use strict</code>关键字来使语法更加严谨。打开strict后，任何变量在使用前都需要先进行<code>my</code>关键字的定义。</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#! /usr/bin/perl</span></span><br><span class="line"><span class="comment">#use strict;</span></span><br><span class="line"><span class="keyword">use</span> v5.<span class="number">12</span>;</span><br><span class="line"><span class="keyword">my</span> $bamm_bamm = <span class="number">3</span>; <span class="comment"># New lexical variable</span></span><br><span class="line"></span><br><span class="line">$bammbamm += <span class="number">1</span>; <span class="comment"># No such variable: Compile time fatal error</span></span><br></pre></td></tr></table></figure>

<p>使用<code>use v5.12</code>和使用<code>use strict</code>的效果相同。</p>
<p><img src="/2024/05/08/LearnPerl/image-26.png"></p>
<p>当程序规模变大时，最后使用strict。一般来讲，任何超过一个屏幕长的程序都应该使用strict.</p>
<h4 id="返回-return"><a href="#返回-return" class="headerlink" title="返回 return"></a>返回 return</h4><p>在某些情况下需要提前终止子程序，这是就用到了关键字<code>return</code>：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#! /usr/bin/perl</span></span><br><span class="line"><span class="comment">#use strict;</span></span><br><span class="line"><span class="keyword">use</span> v5.<span class="number">12</span>;</span><br><span class="line"><span class="keyword">my</span> @names = <span class="keyword">qw</span>/ fred barney betty dino wilma pebbles bamm-bamm /;</span><br><span class="line"><span class="keyword">my</span> $result = &amp;which_element_is(<span class="string">&quot;dino&quot;</span>, @names);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">sub</span> <span class="title">which_element_is</span> </span>&#123;</span><br><span class="line">    <span class="keyword">my</span>($what, @array) = @_;</span><br><span class="line">    <span class="keyword">foreach</span> (<span class="number">0</span>..$#array) &#123; <span class="comment"># indices of @array&#x27;s elements</span></span><br><span class="line">        <span class="keyword">if</span> ($what eq $array[$_]) &#123;</span><br><span class="line">            <span class="keyword">return</span> $_; <span class="comment"># return early once found</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">-<span class="number">1</span>; <span class="comment"># element not found (return is optional here)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/2024/05/08/LearnPerl/image-27.png"></p>
<h4 id="省略-符号"><a href="#省略-符号" class="headerlink" title="省略&amp;符号"></a>省略&amp;符号</h4><p>一些情况下在函数调用时可以省略前面的&amp;符号。</p>
<p>然而，如果函数的命名正好与Perl的内置函数同名，那么调用时必须加上<code>&amp;</code>符号，否则无法区分自己定义的函数和内置函数，而Perl会默认调用内置函数。</p>
<h4 id="非标量输出"><a href="#非标量输出" class="headerlink" title="非标量输出"></a>非标量输出</h4><p>如果在一些情况下，函数需要返回一个非标量的输出，即，一个列表。<br>如果在列表上下文中，这种操作是完全没问题的。例如如果想要改进<code>..</code>操作，使其能够产生递减的列表：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#! /usr/bin/perl</span></span><br><span class="line"><span class="keyword">use</span> v5.<span class="number">10</span>;</span><br><span class="line"><span class="function"><span class="keyword">sub</span> <span class="title">list_from_fred_to_barney</span> </span>&#123;</span><br><span class="line"> <span class="keyword">if</span> ($fred &lt; $barney) &#123;</span><br><span class="line"> <span class="comment"># Count upwards from $fred to $barney</span></span><br><span class="line"> $fred..$barney;</span><br><span class="line"> &#125; <span class="keyword">else</span> &#123;</span><br><span class="line"> <span class="comment"># Count downwards from $fred to $barney</span></span><br><span class="line"> <span class="keyword">reverse</span> $barney..$fred;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line">$fred = <span class="number">11</span>;</span><br><span class="line">$barney = <span class="number">6</span>;</span><br><span class="line">@c = &amp;list_from_fred_to_barney; <span class="comment"># @c gets (11, 10, 9, 8, 7, 6)</span></span><br><span class="line"><span class="keyword">say</span> @c;</span><br></pre></td></tr></table></figure>

<p><img src="/2024/05/08/LearnPerl/image-28.png"></p>
<h4 id="持续变量"><a href="#持续变量" class="headerlink" title="持续变量"></a>持续变量</h4><p>一个使用<code>my</code>关键字定义的变量是局部变量，且在每次调用时都被重置。如果想维护一个持续的局部变量，则可以使用<code>state</code>关键字：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#! /usr/bin/perl</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> v5.<span class="number">10</span>;</span><br><span class="line">running_sum( <span class="number">5</span>, <span class="number">6</span> );</span><br><span class="line">running_sum( <span class="number">1</span>..<span class="number">3</span> );</span><br><span class="line">running_sum( <span class="number">4</span> );</span><br><span class="line"><span class="function"><span class="keyword">sub</span> <span class="title">running_sum</span> </span>&#123;</span><br><span class="line"> <span class="keyword">state</span> $sum = <span class="number">0</span>;</span><br><span class="line"> <span class="keyword">state</span> @numbers;</span><br><span class="line"> <span class="keyword">foreach</span> <span class="keyword">my</span> $number ( @_ ) &#123;</span><br><span class="line"> <span class="keyword">push</span> @numbers, $number;</span><br><span class="line"> $sum += $number;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">say</span> <span class="string">&quot;The sum of (@numbers) is $sum&quot;</span>;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p><img src="/2024/05/08/LearnPerl/image-29.png"></p>
<h4 id="子函数签名subroutine-signatures"><a href="#子函数签名subroutine-signatures" class="headerlink" title="子函数签名subroutine signatures"></a>子函数签名subroutine signatures</h4><p>在perl的5.20以后版本，引入了该特性()。使得函数可以像C语言那样定义，同时为变量设置默认值：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#! /usr/bin/perl</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> v5.<span class="number">20</span>;</span><br><span class="line"><span class="keyword">use</span> strict;</span><br><span class="line"><span class="keyword">use</span> warnings;</span><br><span class="line"><span class="keyword">use</span> experimental <span class="string">&#x27;signatures&#x27;</span>;  <span class="comment"># 启用子程序签名功能</span></span><br><span class="line"><span class="function"><span class="keyword">sub</span> <span class="title">list_from_fred_to_barney</span> (  $<span class="title">fred</span> = 0,  $<span class="title">barney</span> = 7 ) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> ($fred &lt; $barney) &#123; $fred..$barney &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123; <span class="keyword">reverse</span> $barney..$fred &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">my</span> @defaults = list_from_fred_to_barney();</span><br><span class="line"><span class="keyword">my</span> @default_end = list_from_fred_to_barney( <span class="number">17</span> );</span><br><span class="line"><span class="keyword">say</span> <span class="string">&quot;defaults: @defaults&quot;</span>;</span><br><span class="line"><span class="keyword">say</span> <span class="string">&quot;default_end: @default_end&quot;</span>;</span><br></pre></td></tr></table></figure>

<p><img src="/2024/05/08/LearnPerl/image-30.png"></p>
<h3 id="习题-1"><a href="#习题-1" class="headerlink" title="习题"></a>习题</h3><p><img src="/2024/05/08/LearnPerl/image-31.png"></p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#! /usr/bin/perl</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">sub</span> <span class="title">total</span></span>&#123;</span><br><span class="line">    <span class="keyword">my</span> $sum;</span><br><span class="line">    <span class="keyword">foreach</span> (@_)&#123;</span><br><span class="line">        $sum += $_;</span><br><span class="line">    &#125;</span><br><span class="line">    $sum;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">my</span> @fred = <span class="string">qw&#123; 1 3 5 7 9 &#125;</span>;</span><br><span class="line"><span class="keyword">my</span> $fred_total = total(@fred);</span><br><span class="line"><span class="keyword">print</span> <span class="string">&quot;The total of \@fred is $fred_total.\n&quot;</span>;</span><br><span class="line"><span class="keyword">print</span> <span class="string">&quot;Enter some numbers on separate lines: &quot;</span>;</span><br><span class="line"><span class="keyword">my</span> $user_total = total(&lt;STDIN&gt;);</span><br><span class="line"><span class="keyword">print</span> <span class="string">&quot;The total of those numbers is $user_total.\n&quot;</span>;</span><br></pre></td></tr></table></figure>

<p><img src="/2024/05/08/LearnPerl/image-32.png"></p>
<p><img src="/2024/05/08/LearnPerl/image-33.png"></p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#! /usr/bin/perl</span></span><br><span class="line"><span class="keyword">use</span> v5.<span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">sub</span> <span class="title">total</span></span>&#123;</span><br><span class="line">    <span class="keyword">my</span> $sum;</span><br><span class="line">    <span class="keyword">foreach</span> (@_)&#123;</span><br><span class="line">        $sum += $_;</span><br><span class="line">    &#125;</span><br><span class="line">    $sum;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">say</span> total(<span class="number">1</span>..<span class="number">1000</span>);</span><br></pre></td></tr></table></figure>

<p><img src="/2024/05/08/LearnPerl/image-34.png"></p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#! /usr/bin/perl</span></span><br><span class="line"><span class="keyword">use</span> v5.<span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">sub</span> <span class="title">average</span></span>&#123;</span><br><span class="line">    <span class="keyword">my</span> $sum;</span><br><span class="line">    <span class="keyword">foreach</span>(@_)&#123;</span><br><span class="line">        $sum += $_;</span><br><span class="line">    &#125;</span><br><span class="line">    $sum/@_;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">sub</span> <span class="title">above_average</span></span>&#123;</span><br><span class="line">    <span class="keyword">my</span> @above;</span><br><span class="line">    <span class="keyword">my</span> $average = average(@_);</span><br><span class="line">    <span class="keyword">foreach</span>(@_)&#123;</span><br><span class="line">        <span class="keyword">if</span>($_ &gt; $average)&#123;</span><br><span class="line">             <span class="keyword">push</span> @above,$_;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    @above;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">my</span> @fred = above_average(<span class="number">1</span>..<span class="number">10</span>);</span><br><span class="line"><span class="keyword">print</span> <span class="string">&quot;\@fred is @fred\n&quot;</span>;</span><br><span class="line"><span class="keyword">print</span> <span class="string">&quot;(Should be 6 7 8 9 10)\n&quot;</span>;</span><br><span class="line"><span class="keyword">my</span> @barney = above_average(<span class="number">100</span>, <span class="number">1</span>..<span class="number">10</span>);</span><br><span class="line"><span class="keyword">print</span> <span class="string">&quot;\@barney is @barney\n&quot;</span>;</span><br><span class="line"><span class="keyword">print</span> <span class="string">&quot;(Should be just 100)\n&quot;</span>;</span><br></pre></td></tr></table></figure>

<p><img src="/2024/05/08/LearnPerl/image-35.png"></p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#! /usr/bin/perl</span></span><br><span class="line"><span class="keyword">use</span> v5.<span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">sub</span> <span class="title">greet</span></span>&#123;</span><br><span class="line">    <span class="keyword">state</span> $here;</span><br><span class="line">    <span class="keyword">if</span> ($here)&#123;</span><br><span class="line">        <span class="keyword">say</span> <span class="string">&quot;Hi @_[0]! $here is also here!&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">say</span> <span class="string">&quot;Hi @_[0]! You are the first one here!&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    $here = @_[<span class="number">0</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">greet( <span class="string">&quot;Fred&quot;</span> );</span><br><span class="line">greet( <span class="string">&quot;Barney&quot;</span> );</span><br><span class="line">greet( <span class="string">&quot;Wilma&quot;</span> );</span><br><span class="line">greet( <span class="string">&quot;Betty&quot;</span> );</span><br></pre></td></tr></table></figure>

<p><img src="/2024/05/08/LearnPerl/image-36.png"></p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#! /usr/bin/perl</span></span><br><span class="line"><span class="keyword">use</span> v5.<span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">sub</span> <span class="title">greet</span></span>&#123;</span><br><span class="line">    <span class="keyword">state</span> @here;</span><br><span class="line">    <span class="keyword">if</span> (@here)&#123;</span><br><span class="line">        <span class="keyword">say</span> <span class="string">&quot;Hi @_[0]! I&#x27;ve seen: @here&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">say</span> <span class="string">&quot;Hi @_[0]! You are the first one here!&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">push</span> @here,   @_[<span class="number">0</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">greet( <span class="string">&quot;Fred&quot;</span> );</span><br><span class="line">greet( <span class="string">&quot;Barney&quot;</span> );</span><br><span class="line">greet( <span class="string">&quot;Wilma&quot;</span> );</span><br><span class="line">greet( <span class="string">&quot;Betty&quot;</span> );</span><br></pre></td></tr></table></figure>

<h2 id="ch5-输入-输出"><a href="#ch5-输入-输出" class="headerlink" title="ch5 输入&#x2F;输出"></a>ch5 输入&#x2F;输出</h2><h3 id="标准输入流"><a href="#标准输入流" class="headerlink" title="标准输入流"></a>标准输入流</h3><p>如前所述，标准输入流为&lt;STDIN&gt;。</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#! /usr/bin/perl</span></span><br><span class="line"><span class="keyword">use</span> v5.<span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (&lt;STDIN&gt;) &#123;</span><br><span class="line"> <span class="keyword">print</span> <span class="string">&quot;I saw $_&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">foreach</span> (&lt;STDIN&gt;) &#123;</span><br><span class="line"> <span class="keyword">print</span> <span class="string">&quot;I saw $_&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上面的2种循环的执行逻辑是不同的，while是标量上下文，而foreach是列表上下文：</p>
<p><img src="/2024/05/08/LearnPerl/image-37.png"></p>
<h4 id="钻石符号"><a href="#钻石符号" class="headerlink" title="钻石符号&lt;&gt;"></a>钻石符号&lt;&gt;</h4><p>两个尖括号<code>&lt;&gt;</code>称作钻石符号，同样也用于标准输入。</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#! /usr/bin/perl</span></span><br><span class="line"><span class="keyword">use</span> v5.<span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (&lt;&gt;) &#123;</span><br><span class="line"> <span class="keyword">chomp</span>;</span><br><span class="line"> <span class="keyword">print</span> <span class="string">&quot;It was $_ that I saw!\n&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/2024/05/08/LearnPerl/image-38.png"></p>
<p>钻石符号的作用在于可以指定调用参数，从文件中读取标准输入。</p>
<p>一般而言，钻石符号在程序中使用一次就够了，其他多余的调用往往意味着错误。</p>
<h4 id="双钻石符号"><a href="#双钻石符号" class="headerlink" title="双钻石符号 &lt;&lt;&gt;&gt;"></a>双钻石符号 &lt;&lt;&gt;&gt;</h4><p>单钻石符号的问题在于，在输入参数含义特殊字符时可能出问题。</p>
<p>例如会将<code>|</code>操作符当作Pipe处理：</p>
<p><img src="/2024/05/08/LearnPerl/image-39.png"></p>
<p>而5.22之后的版本使用双钻石符号修复该问题：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> v5.<span class="number">22</span>;</span><br><span class="line"><span class="keyword">while</span> (&lt;&lt;&gt;&gt;) &#123;</span><br><span class="line"> <span class="keyword">chomp</span>;</span><br><span class="line"> <span class="keyword">print</span> <span class="string">&quot;It was $_ that I saw!\n&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="调用参数列表"><a href="#调用参数列表" class="headerlink" title="调用参数列表"></a>调用参数列表</h4><p>perl中的调用参数存储在一个内置列表<code>@ARGV</code>中。可以对上述列表进行单独操作。</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#! /usr/bin/perl</span></span><br><span class="line"><span class="keyword">use</span> v5.<span class="number">22</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">pop</span> @ARGV;</span><br><span class="line"><span class="keyword">say</span> <span class="string">&quot;The invocation augments are: @ARGV&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (&lt;&lt;&gt;&gt;) &#123;</span><br><span class="line"> <span class="keyword">chomp</span>;</span><br><span class="line"> <span class="keyword">print</span> <span class="string">&quot;It was $_ that I saw!\n&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2024/05/08/LearnPerl/image-40.png"></p>
<h4 id="标准输出"><a href="#标准输出" class="headerlink" title="标准输出"></a>标准输出</h4><p><code>print</code>函数被用作标准输出。</p>
<p>在对列表进行print时，有直接print和插值print2种不同方式：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#! /usr/bin/perl</span></span><br><span class="line"><span class="keyword">use</span> v5.<span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">$&quot; = <span class="string">&#x27;,&#x27;</span>;</span><br><span class="line">@array =  ( <span class="string">&quot;fred\n&quot;</span>,<span class="string">&quot;barney\n&quot;</span>,<span class="string">&quot;betty\n&quot;</span>   );</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> @array; <span class="comment"># print a list of items</span></span><br><span class="line"><span class="keyword">print</span> <span class="string">&quot;@array&quot;</span>; <span class="comment"># print a string (containing an interpolated array)</span></span><br></pre></td></tr></table></figure>

<p><img src="/2024/05/08/LearnPerl/image-41.png"></p>
<p>区别在于，直接print会将列表合并成一整个字符串进行输出，而插值会在每个列表元素之间插入一个指定字符后输出。</p>
<p>需要插值的字符串保存在Perl的内置变量<code>$&quot;</code>中，默认为一个空格。</p>
<h4 id="括号"><a href="#括号" class="headerlink" title="括号"></a>括号</h4><p>在不影响上下文的情况下perl中的括号都可以省略。</p>
<p>然而，有些情况下，省略括号会得到奇怪的结果：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#! /usr/bin/perl</span></span><br><span class="line"><span class="keyword">use</span> v5.<span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">say</span> (<span class="number">2</span>+<span class="number">3</span>)*<span class="number">4</span>; <span class="comment"># Oops!</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">say</span> (<span class="keyword">say</span> (<span class="number">2</span>+<span class="number">3</span>)*<span class="number">4</span>);</span><br><span class="line"></span><br><span class="line">(<span class="keyword">say</span> (<span class="number">2</span>+<span class="number">3</span>)*<span class="number">4</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">say</span>( (<span class="number">2</span>+<span class="number">3</span>) * <span class="number">4</span> );</span><br></pre></td></tr></table></figure>
<p>上述程序输出如下结果：<br><img src="/2024/05/08/LearnPerl/image-42.png"></p>
<p>第一行输出5，这是因为perl会先计算2+3，然后执行say,得到5，同时返回结果为1，将1乘4得到4，但是并没有对4进行任何后续操作。</p>
<p>第二行输出5 4，验证了这一结果。</p>
<p>同理，第三行输出5，只有添加了正确的括号才得到预期的结果。</p>
<h4 id="格式化输出printf"><a href="#格式化输出printf" class="headerlink" title="格式化输出printf"></a>格式化输出printf</h4><p>perl提供了和C语言相同的格式化输出方式printf:</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">printf</span> <span class="string">&quot;Hello, %s; your password expires in %d days!\n&quot;</span>,$user, $days_to_die;</span><br><span class="line"><span class="keyword">printf</span> <span class="string">&quot;%g %g %g\n&quot;</span>, <span class="number">5</span>/<span class="number">2</span>, <span class="number">51</span>/<span class="number">17</span>, <span class="number">51</span> ** <span class="number">17</span>; <span class="comment"># 2.5 3 1.0683e+29</span></span><br><span class="line"><span class="keyword">printf</span> <span class="string">&quot;in %x days!\n&quot;</span>, <span class="number">17</span>; <span class="comment"># in 0x11 days!</span></span><br><span class="line"><span class="keyword">printf</span> <span class="string">&quot;in %o days!\n&quot;</span>, <span class="number">17</span>; <span class="comment"># in 021 days!</span></span><br><span class="line"><span class="keyword">printf</span> <span class="string">&quot;%10s\n&quot;</span>, <span class="string">&quot;wilma&quot;</span>; <span class="comment"># looks like `````wilma</span></span><br><span class="line"><span class="keyword">printf</span> <span class="string">&quot;%12f\n&quot;</span>, <span class="number">6</span> * <span class="number">7</span> + <span class="number">2</span>/<span class="number">3</span>; <span class="comment"># looks like ```42.666667</span></span><br><span class="line"><span class="keyword">printf</span> <span class="string">&quot;%12.3f\n&quot;</span>, <span class="number">6</span> * <span class="number">7</span> + <span class="number">2</span>/<span class="number">3</span>; <span class="comment"># looks like ``````42.667</span></span><br><span class="line"><span class="keyword">printf</span> <span class="string">&quot;%12.0f\n&quot;</span>, <span class="number">6</span> * <span class="number">7</span> + <span class="number">2</span>/<span class="number">3</span>; <span class="comment"># looks like ``````````43</span></span><br></pre></td></tr></table></figure>

<p>其中%g会自动选择较为合适的输出格式。</p>
<h4 id="列表与printf"><a href="#列表与printf" class="headerlink" title="列表与printf"></a>列表与printf</h4><p>对于一个不定长的列表，使用格式化输出可能比较困难，但是借助perl的标量上下文特性可以轻松做到：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#! /usr/bin/perl</span></span><br><span class="line"><span class="keyword">use</span> v5.<span class="number">10</span>;</span><br><span class="line"><span class="keyword">my</span> @items = <span class="string">qw( wilma dino pebbles )</span>;</span><br><span class="line"><span class="keyword">printf</span> <span class="string">&quot;The items are:\n&quot;</span>.(<span class="string">&quot;%10s\n&quot;</span> <span class="keyword">x</span> @items), @items;</span><br></pre></td></tr></table></figure>

<p><img src="/2024/05/08/LearnPerl/image-43.png"></p>
<h3 id="文件句柄-filehandles"><a href="#文件句柄-filehandles" class="headerlink" title="文件句柄 filehandles"></a>文件句柄 filehandles</h3><p>perl 通过文件句柄方式来操作文件：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">open</span> CONFIG, <span class="string">&#x27;dino&#x27;</span>;</span><br><span class="line"><span class="keyword">open</span> CONFIG, <span class="string">&#x27;&lt;dino&#x27;</span>;</span><br><span class="line"><span class="keyword">open</span> BEDROCK, <span class="string">&#x27;&gt;fred&#x27;</span>;</span><br><span class="line"><span class="keyword">open</span> LOG, <span class="string">&#x27;&gt;&gt;logfile&#x27;</span>;</span><br></pre></td></tr></table></figure>
<p>为了不与一些内建函数冲突，最好是使用全大写的方式命名文件句柄。</p>
<p>在perl中，仅有6个内建的大写变量：STDIN, STDOUT, STDERR, DATA, ARGV, and ARGVOUT</p>
<p>打开文件的方式分为：</p>
<ol>
<li><code>&lt;</code> 读取</li>
<li><code>&gt;</code> 写入</li>
<li><code>&gt;&gt;</code>追加写入</li>
</ol>
<p>在5.6之后的版本也支持：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">open</span> CONFIG, <span class="string">&#x27;&lt;&#x27;</span>, <span class="string">&#x27;dino&#x27;</span>;</span><br><span class="line"><span class="keyword">open</span> BEDROCK, <span class="string">&#x27;&gt;&#x27;</span>, $file_name;</span><br><span class="line"><span class="keyword">open</span> LOG, <span class="string">&#x27;&gt;&gt;&#x27;</span>, &amp;logfile_name();</span><br></pre></td></tr></table></figure>

<p>这么做的的好吃是，对文件的操作方式更加明确，并且可以指定文件的编码类型：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">open</span> BEDROCK, <span class="string">&#x27;&gt;:encoding(UTF-8)&#x27;</span>, $file_name;</span><br><span class="line"><span class="keyword">open</span> LOG, <span class="string">&#x27;&gt;&gt;:encoding(UTF-8)&#x27;</span>, &amp;logfile_name();</span><br></pre></td></tr></table></figure>

<p><code>perl -MEncode -le &quot;print for Encode-&gt;encodings(&#39;:all&#39;)&quot;</code>可以打印出所有的编码方式：<br><img src="/2024/05/08/LearnPerl/image-44.png"></p>
<p>对于打开遇到错误的文件句柄，会被设置为<code>undef</code>。</p>
<h3 id="二进制格式binmode"><a href="#二进制格式binmode" class="headerlink" title="二进制格式binmode"></a>二进制格式binmode</h3><p>假设我们有一个脚本需要将数据写入标准输出和标准错误输出，并且我们希望数据保持原样，不进行任何换行符转换。</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> strict;</span><br><span class="line"><span class="keyword">use</span> warnings;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将 STDOUT 和 STDERR 切换到二进制模式</span></span><br><span class="line"><span class="keyword">binmode</span> STDOUT;  <span class="comment"># don&#x27;t translate line endings</span></span><br><span class="line"><span class="keyword">binmode</span> STDERR;  <span class="comment"># don&#x27;t translate line endings</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出一些数据</span></span><br><span class="line"><span class="keyword">print</span> STDOUT <span class="string">&quot;Hello, World!\n&quot;</span>;</span><br><span class="line"><span class="keyword">print</span> STDERR <span class="string">&quot;Error: Something went wrong!\n&quot;</span>;</span><br></pre></td></tr></table></figure>

<p>在没有 binmode STDOUT; 和 binmode STDERR; 的情况下，在 Windows 系统上运行这个脚本可能会将 \n 转换为 \r\n，导致输出中有额外的回车符。而使用了 binmode 后，这些换行符将保持不变，确保输出的一致性。</p>
<p>假设我们需要从一个 UTF-8 编码的文件中读取数据，并正确处理其中的 Unicode 字符。<br>首先，我们创建一个包含 Unicode 字符的文件 input.txt：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">你好，世界！</span><br><span class="line">Hello, World!</span><br></pre></td></tr></table></figure>
<p>然后，我们编写一个 Perl 脚本来读取并输出这个文件的内容：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#! /usr/bin/perl</span></span><br><span class="line"><span class="keyword">use</span> strict;</span><br><span class="line"><span class="keyword">use</span> warnings;</span><br><span class="line"><span class="keyword">use</span> utf8;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置输入和输出的编码</span></span><br><span class="line"><span class="keyword">binmode</span> STDOUT, <span class="string">&#x27;:encoding(UTF-8)&#x27;</span>;  <span class="comment"># 设置标准输出为 UTF-8 编码</span></span><br><span class="line"><span class="keyword">binmode</span> STDERR, <span class="string">&#x27;:encoding(UTF-8)&#x27;</span>;  <span class="comment"># 设置标准错误输出为 UTF-8 编码</span></span><br><span class="line"><span class="keyword">binmode</span> STDIN, <span class="string">&#x27;:encoding(UTF-8)&#x27;</span>;   <span class="comment"># 设置标准输入为 UTF-8 编码</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">my</span> $fh;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 打开输入文件</span></span><br><span class="line"><span class="keyword">if</span> (! (<span class="keyword">open</span> <span class="keyword">my</span> $fh, <span class="string">&#x27;&lt;:encoding(UTF-8)&#x27;</span>, <span class="string">&#x27;input.txt&#x27;</span>) )&#123;</span><br><span class="line">     <span class="keyword">die</span> <span class="string">&quot;Cannot open file: $!&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment"># 读取文件内容并处理</span></span><br><span class="line"><span class="keyword">while</span> (<span class="keyword">my</span> $line = &lt;$fh&gt;) &#123;</span><br><span class="line">    <span class="keyword">if</span> ($line =~ <span class="regexp">/Hello/</span>) &#123;</span><br><span class="line">        <span class="keyword">print</span> STDOUT <span class="string">&quot;Found: $line&quot;</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">print</span> STDERR <span class="string">&quot;Not found: $line&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">close</span> $fh;</span><br></pre></td></tr></table></figure>

<p>在这个脚本中，我们对标准输入、标准输出和标准错误输出都设置了 UTF-8 编码。这样我们可以确保：<br>从文件中读取的数据是正确解码的 Unicode 字符。<br>输出的数据也会被正确编码为 UTF-8，确保在不同平台上输出的一致性。</p>
<h4 id="结束句柄"><a href="#结束句柄" class="headerlink" title="结束句柄"></a>结束句柄</h4><p>如上所述，每个open 操作最好带有一个close操作。</p>
<h4 id="die用于处理致命错误"><a href="#die用于处理致命错误" class="headerlink" title="die用于处理致命错误"></a>die用于处理致命错误</h4><p>如上述程序所示，可以用die来处理致命错误。系统的报错信息和行号会被自动存储在<code>$!</code>变量中。</p>
<p>此外可以把<code>die</code>换成<code>warn</code>函数来生成警告，区别在于不会结束进程而是打印警告信息。</p>
<p>此外在5.10后的版本还可以通过添加<code>use autodie；</code>来使程序自动退出，从而省去了检查。</p>
<h4 id="文件句柄的使用"><a href="#文件句柄的使用" class="headerlink" title="文件句柄的使用"></a>文件句柄的使用</h4><p>文件句柄的使用，可以将其放入尖括号中：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> ( ! <span class="keyword">open</span> PASSWD, <span class="string">&quot;/etc/passwd&quot;</span>) &#123;</span><br><span class="line"> <span class="keyword">die</span> <span class="string">&quot;How did you get logged in? ($!)&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">while</span> (&lt;PASSWD&gt;) &#123;</span><br><span class="line"> <span class="keyword">chomp</span>;</span><br><span class="line"> ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>此外，如果是以写入方式打开的句柄，可以通过在printf 后直接写上文件句柄的方式来将其写入到对应文件：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#! /usr/bin/perl</span></span><br><span class="line"><span class="keyword">use</span> v5.<span class="number">24</span>;</span><br><span class="line"><span class="keyword">use</span> autodie;</span><br><span class="line"></span><br><span class="line"><span class="keyword">open</span> LOG, <span class="string">&#x27;&gt;&gt;&#x27;</span>, <span class="string">&#x27;logfile&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> LOG <span class="string">&quot;Captain&#x27;s log, stardate 3.14159\n&quot;</span>; <span class="comment"># output goes to LOG</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> LOG;</span><br><span class="line"><span class="keyword">printf</span> <span class="string">&quot;I hope Mr. Slate doesn&#x27;t find out about this.\n&quot;</span>;</span><br><span class="line"><span class="keyword">print</span> <span class="string">&quot;Wilma!\n&quot;</span>;</span><br></pre></td></tr></table></figure>

<p>如果不指定print或printf的输出句柄，其默认会输出到STDOUT，也就是用户的显示屏。</p>
<p>然而可以通过select的方式指定输出的位置，从而改变输出目的地。</p>
<h4 id="重新打开文件句柄"><a href="#重新打开文件句柄" class="headerlink" title="重新打开文件句柄"></a>重新打开文件句柄</h4><p>如果重新打开一个文件句柄，Perl会先关闭前一个，然后打开一个新的，因此，可以重新指定perl的标准文件句柄，从而使一些信息输出到指定的地方。</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Send errors to my private error log</span></span><br><span class="line"><span class="keyword">if</span> ( ! <span class="keyword">open</span> STDERR, <span class="string">&quot;&gt;&gt;/home/barney/.error_log&quot;</span>) &#123;</span><br><span class="line"> <span class="keyword">die</span> <span class="string">&quot;Can&#x27;t open error log for append: $!&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="标量变量的句柄"><a href="#标量变量的句柄" class="headerlink" title="标量变量的句柄"></a>标量变量的句柄</h4><p>perl支持将文件句柄保存在标量变量中：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#! /usr/bin/perl</span></span><br><span class="line"><span class="keyword">use</span> v5.<span class="number">24</span>;</span><br><span class="line"><span class="keyword">use</span> autodie;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">open</span> <span class="keyword">my</span> $rocks_fh, <span class="string">&#x27;&gt;&gt;&#x27;</span>, <span class="string">&#x27;rocks.txt&#x27;</span></span><br><span class="line">  <span class="keyword">or</span> <span class="keyword">die</span> <span class="string">&quot;Could not open rocks.txt: $!&quot;</span>;</span><br><span class="line"><span class="keyword">foreach</span> <span class="keyword">my</span> $rock ( <span class="string">qw( slate lava granite )</span> ) &#123;</span><br><span class="line">    <span class="keyword">say</span> $rocks_fh $rock</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">print</span> $rocks_fh <span class="string">&quot;limestone\n&quot;</span>;</span><br><span class="line"><span class="keyword">close</span> $rocks_fh;</span><br></pre></td></tr></table></figure>

<p>将句柄保存为标量，好处是可以用函数对其进行处理，同时作用域更加明确。</p>
<p>此外注意<code>say</code>和<code>print</code>的位置是没有逗号的，因为执行的是文件写入操作。</p>
<p>如果将文件句柄当作标量打印，得到的结果会很奇怪。</p>
<p>解决方案是将文件句柄用花括号括起来(创建一个独立的域)。</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">print</span> &#123; $rocks_fh &#125; <span class="string">&quot;sandstone\n&quot;</span>;</span><br><span class="line"><span class="keyword">print</span> &#123;$rocks_fh&#125; $_; </span><br></pre></td></tr></table></figure>

<h3 id="习题-2"><a href="#习题-2" class="headerlink" title="习题"></a>习题</h3><p><img src="/2024/05/08/LearnPerl/image-45.png"></p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#! /usr/bin/perl</span></span><br><span class="line"><span class="keyword">use</span> v5.<span class="number">22</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">my</span> @stack;</span><br><span class="line"><span class="keyword">while</span> (&lt;&gt;)&#123;</span><br><span class="line">    <span class="keyword">push</span> @stack,$_;</span><br><span class="line">    <span class="keyword">chomp</span>(@stack)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">my</span> $temp = <span class="keyword">pop</span> @stack;</span><br><span class="line"><span class="keyword">while</span> (<span class="keyword">defined</span>($temp))&#123;</span><br><span class="line">    <span class="keyword">say</span> $temp;</span><br><span class="line">    $temp = <span class="keyword">pop</span> @stack;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2024/05/08/LearnPerl/image-46.png"></p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#! /usr/bin/perl</span></span><br><span class="line"><span class="keyword">use</span> v5.<span class="number">22</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">chomp</span>(<span class="keyword">my</span> @list=&lt;STDIN&gt;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">say</span> ((<span class="number">0</span>..<span class="number">9</span>)x6);</span><br><span class="line"><span class="keyword">printf</span> <span class="string">&quot;%20s\n&quot;</span><span class="keyword">x</span>@list,@list;</span><br></pre></td></tr></table></figure>

<p><img src="/2024/05/08/LearnPerl/image-47.png"></p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#! /usr/bin/perl</span></span><br><span class="line"><span class="keyword">use</span> v5.<span class="number">22</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">say</span> <span class="string">&quot;Please input your length:&quot;</span>;</span><br><span class="line"><span class="keyword">my</span> $length = &lt;STDIN&gt;;</span><br><span class="line"><span class="keyword">say</span> <span class="string">&quot;Please input your strings:&quot;</span>;</span><br><span class="line"><span class="keyword">chomp</span>(<span class="keyword">my</span> @list = &lt;STDIN&gt;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">say</span> (<span class="number">0</span>..$length);</span><br><span class="line"></span><br><span class="line"><span class="keyword">foreach</span> (@list)&#123;</span><br><span class="line">    <span class="keyword">say</span> <span class="string">&#x27; &#x27;</span><span class="keyword">x</span>($length-<span class="keyword">length</span>($_)).$_;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ch6-哈希"><a href="#ch6-哈希" class="headerlink" title="ch6 哈希"></a>ch6 哈希</h2><h3 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h3><p>哈希即一系列key-value的组合，可以通过key来管理、索引数据。<br><img src="/2024/05/08/LearnPerl/image-48.png"></p>
<p><img src="/2024/05/08/LearnPerl/image-49.png"><br>哈希中的数据通常是无序的，可以看作是一个桶中放着带有不同标签的元素。</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#! /usr/bin/perl</span></span><br><span class="line"><span class="keyword">use</span> v5.<span class="number">22</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">my</span> %family_name;</span><br><span class="line">$family_name&#123;<span class="string">&#x27;fred&#x27;</span>&#125; = <span class="string">&#x27;flintstone&#x27;</span>;</span><br><span class="line">$family_name&#123;<span class="string">&#x27;barney&#x27;</span>&#125; = <span class="string">&#x27;rubble&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">foreach</span> <span class="keyword">my</span> $person (<span class="string">qw&lt; barney fred &gt;</span>) &#123;</span><br><span class="line"> <span class="keyword">print</span> <span class="string">&quot;I&#x27;ve heard of $person $family_name&#123;$person&#125;.\n&quot;</span>;</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="keyword">my</span> %some_hash = (<span class="string">&#x27;foo&#x27;</span>, <span class="number">35</span>, <span class="string">&#x27;bar&#x27;</span>, <span class="number">12.4</span>, <span class="number">2.5</span>, <span class="string">&#x27;hello&#x27;</span>,</span><br><span class="line"> <span class="string">&#x27;wilma&#x27;</span>, <span class="number">1.72</span>e3<span class="number">0</span>, <span class="string">&#x27;betty&#x27;</span>, <span class="string">&quot;bye\n&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">my</span> @array = %some_hash;</span><br><span class="line"><span class="keyword">say</span>  $some_hash&#123;<span class="number">2.5</span>&#125;;</span><br><span class="line"><span class="keyword">print</span> @array;</span><br></pre></td></tr></table></figure>

<p><img src="/2024/05/08/LearnPerl/image-51.png"></p>
<p>哈希变量用百分号<code>%</code>来定义。用大括号<code>&#123;&#125;</code>来索引。哈希变量可以展开赋值给列表，列表中元素的顺序可能与定义时不同，这是因为perl为了索引将元素进行了重新排序。</p>
<p>可以使用类似</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">%ip_address = <span class="keyword">reverse</span> %host_name;</span><br></pre></td></tr></table></figure>

<p>的操作，将键值对进行反转，通过原来的值来查找对应的键。这么做的前提是所有键值对是一一对应的。如果有重复的则会进行覆盖。</p>
<h4 id="箭头符号"><a href="#箭头符号" class="headerlink" title="箭头符号 &#x3D;&gt;"></a>箭头符号 &#x3D;&gt;</h4><p>perl专门为哈希定义了一个符号<code>=&gt;</code>用于定义哈希表。<br>在使用箭头符号进行定义时，可以省略字符串两边的引号。</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">my</span> %last_name = (</span><br><span class="line"> <span class="string">fred =&gt;</span> <span class="string">&#x27;flintstone&#x27;</span>,</span><br><span class="line"> <span class="string">dino =&gt;</span> <span class="keyword">undef</span>,</span><br><span class="line"> <span class="string">barney =&gt;</span> <span class="string">&#x27;rubble&#x27;</span>,</span><br><span class="line"> <span class="string">betty =&gt;</span> <span class="string">&#x27;rubble&#x27;</span>,</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">say</span>;</span><br><span class="line"><span class="keyword">say</span> $last_name<span class="string">&#123;fred&#125;</span>;</span><br></pre></td></tr></table></figure>

<h3 id="哈希函数"><a href="#哈希函数" class="headerlink" title="哈希函数"></a>哈希函数</h3><p>perl内建了很多函数来对哈希进行处理。</p>
<h4 id="keys-和-values"><a href="#keys-和-values" class="headerlink" title="keys 和 values"></a>keys 和 values</h4><p>keys 和values会分别返回哈希表的键和值的列表：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#! /usr/bin/perl</span></span><br><span class="line"><span class="keyword">use</span> v5.<span class="number">22</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">my</span> %hash = (<span class="string">&#x27;a&#x27;</span> =&gt; <span class="number">1</span>, <span class="string">&#x27;b&#x27;</span> =&gt; <span class="number">2</span>, <span class="string">&#x27;c&#x27;</span> =&gt; <span class="number">3</span>);</span><br><span class="line"><span class="keyword">my</span> @k = <span class="keyword">keys</span> %hash;</span><br><span class="line"><span class="keyword">my</span> @v = <span class="keyword">values</span> %hash;</span><br><span class="line"><span class="keyword">my</span> $count = <span class="keyword">keys</span> %hash; <span class="comment"># gets 3, meaning three key-value pairs</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">say</span> @k;</span><br><span class="line"><span class="keyword">say</span> @v;</span><br><span class="line"><span class="keyword">say</span> $count;</span><br></pre></td></tr></table></figure>

<p><img src="/2024/05/08/LearnPerl/image-53.png"></p>
<p>在标量上下文中，2个函数都会直接返回元素的个数。</p>
<h4 id="each函数"><a href="#each函数" class="headerlink" title="each函数"></a>each函数</h4><p>each函数同样用在while循环中，来对哈希表的所有key-value对进行遍历。</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#! /usr/bin/perl</span></span><br><span class="line"><span class="keyword">use</span> v5.<span class="number">22</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">my</span> %hash = (<span class="string">&#x27;a&#x27;</span> =&gt; <span class="number">1</span>, <span class="string">&#x27;b&#x27;</span> =&gt; <span class="number">2</span>, <span class="string">&#x27;c&#x27;</span> =&gt; <span class="number">3</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> ( <span class="keyword">my</span> ($key, $value) = <span class="keyword">each</span> %hash ) &#123;</span><br><span class="line"> <span class="keyword">print</span> <span class="string">&quot;$key =&gt; $value\n&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">say</span> <span class="string">&#x27;--------------&#x27;</span>;</span><br><span class="line"><span class="keyword">foreach</span> <span class="keyword">my</span> $key (<span class="keyword">sort</span> <span class="keyword">keys</span> %hash) &#123;</span><br><span class="line">    <span class="keyword">my</span> $value = $hash&#123;$key&#125;;</span><br><span class="line">    <span class="keyword">print</span> <span class="string">&quot;$key =&gt; $value\n&quot;</span>;</span><br><span class="line">    <span class="comment"># Or, we could have avoided the extra $value variable:</span></span><br><span class="line">    <span class="comment"># print &quot;$key =&gt; $hash&#123;$key&#125;\n&quot;;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>由于哈希元素在内部的排序是无序的(或者说安装Perl内部的逻辑进行的)，可能与我们的预期不同，因此需要可能需要人工进行排序。</p>
<p><img src="/2024/05/08/LearnPerl/image-54.png"></p>
<h4 id="exist-delete和内插"><a href="#exist-delete和内插" class="headerlink" title="exist, delete和内插"></a>exist, delete和内插</h4><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#! /usr/bin/perl</span></span><br><span class="line"><span class="keyword">use</span> v5.<span class="number">22</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">my</span> %books;</span><br><span class="line"></span><br><span class="line">$books&#123;<span class="string">&#x27;fred&#x27;</span>&#125; = <span class="number">3</span>;</span><br><span class="line">$books&#123;<span class="string">&#x27;wilma&#x27;</span>&#125; = <span class="number">1</span>;</span><br><span class="line">$books&#123;<span class="string">&quot;barney&quot;</span>&#125; = <span class="number">0</span>; <span class="comment"># no books currently checked out</span></span><br><span class="line">$books&#123;<span class="string">&quot;pebbles&quot;</span>&#125; = <span class="keyword">undef</span>; <span class="comment"># no books EVER checked out; a new library card</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">exists</span> $books&#123;<span class="string">&quot;dino&quot;</span>&#125;) &#123;</span><br><span class="line">    <span class="keyword">print</span> <span class="string">&quot;Hey, there&#x27;s a library card for dino!\n&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">print</span> <span class="string">&quot;dino has no library card!\n&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">my</span> $person = <span class="string">&quot;barney&quot;</span>;</span><br><span class="line"><span class="keyword">delete</span> $books&#123;$person&#125;; </span><br><span class="line"></span><br><span class="line"><span class="keyword">foreach</span> <span class="keyword">my</span> $person (<span class="keyword">sort</span> <span class="keyword">keys</span> %books) &#123; <span class="comment"># each patron, in order</span></span><br><span class="line"> <span class="keyword">if</span> ($books&#123;$person&#125;) &#123;</span><br><span class="line"> <span class="keyword">print</span> <span class="string">&quot;$person has $books&#123;$person&#125; items\n&quot;</span>; <span class="comment"># fred has 3 items</span></span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2024/05/08/LearnPerl/image-55.png"><br><code>exist</code> 用于检查哈希表中元素是否存在，<code>delete</code>用于根据键来删除对应的键值对。</p>
<p>哈希变量同理可以内插进字符串中。</p>
<h4 id="环境变量"><a href="#环境变量" class="headerlink" title="环境变量"></a>环境变量</h4><p>perl通过%ENV这个特殊的哈希来访问系统的环境变量，只要在外部环境中设置过的变量，都可以通过该哈希进行访问：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#! /usr/bin/perl</span></span><br><span class="line"><span class="keyword">use</span> v5.<span class="number">22</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">say</span> <span class="string">&quot;Path is $ENV&#123;PATH&#125;&quot;</span>;</span><br><span class="line"><span class="keyword">say</span> <span class="string">&quot;Display is $ENV&#123;DISPLAY&#125;&quot;</span>;</span><br></pre></td></tr></table></figure>
<p><img src="/2024/05/08/LearnPerl/image-56.png"></p>
<h3 id="习题-3"><a href="#习题-3" class="headerlink" title="习题"></a>习题</h3><p><img src="/2024/05/08/LearnPerl/image-57.png"></p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#! /usr/bin/perl</span></span><br><span class="line"><span class="keyword">use</span> v5.<span class="number">22</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">my</span> %namelist = (</span><br><span class="line">    <span class="string">fred=&gt;</span><span class="string">&quot;flintstone&quot;</span>,</span><br><span class="line">    <span class="string">barney=&gt;</span><span class="string">&quot;rubble&quot;</span>,</span><br><span class="line">    <span class="string">wilma=&gt;</span><span class="string">&quot;flintstone&quot;</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">say</span> <span class="string">&quot;input the name you want to know:&quot;</span>;</span><br><span class="line"><span class="keyword">while</span> (<span class="keyword">chomp</span>(<span class="keyword">my</span> $name = &lt;STDIN&gt;))&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">exists</span> $namelist&#123;$name&#125;)&#123;</span><br><span class="line">        <span class="keyword">say</span> <span class="string">&quot;$name &#x27;s family name is $namelist&#123;$name&#125;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">say</span> <span class="string">&quot;sorry, I don&#x27;t konw a person named $name&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2024/05/08/LearnPerl/image-58.png"></p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#! /usr/bin/perl</span></span><br><span class="line"><span class="keyword">use</span> v5.<span class="number">22</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">my</span> %wordlist;</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span>(&lt;&gt;)&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">exists</span> $wordlist&#123;$_&#125;)&#123;</span><br><span class="line">        $wordlist&#123;$_&#125;+=<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        $wordlist&#123;$_&#125;=<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">foreach</span> ( <span class="keyword">sort</span> <span class="keyword">keys</span> %wordlist)&#123;</span><br><span class="line">    <span class="keyword">say</span> <span class="string">&quot;the word $_ appears $wordlist&#123;$_&#125; times&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2024/05/08/LearnPerl/image-59.png"></p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#! /usr/bin/perl</span></span><br><span class="line"><span class="keyword">use</span> v5.<span class="number">22</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">say</span> ((<span class="string">&quot; &quot;</span>x7).<span class="string">&quot;KEY&quot;</span>.(<span class="string">&quot; &quot;</span>x85).<span class="string">&quot;VALUE&quot;</span>);</span><br><span class="line"><span class="keyword">foreach</span> <span class="keyword">my</span> $key (<span class="keyword">sort</span> <span class="keyword">keys</span> %ENV)&#123;</span><br><span class="line">     <span class="keyword">printf</span> <span class="string">&quot;%10s          %90s\n&quot;</span>,$key,$ENV&#123;$key&#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ch7-漫游正则表达式"><a href="#ch7-漫游正则表达式" class="headerlink" title="ch7 漫游正则表达式"></a>ch7 漫游正则表达式</h2><h3 id="正则表达式的概念"><a href="#正则表达式的概念" class="headerlink" title="正则表达式的概念"></a>正则表达式的概念</h3><p>正则表达式用来检查一串字符串匹配或不匹配某种模式。 </p>
<p>对默认变量<code>$_</code>进行正则匹配，只需要将正则表达式写入斜线<code>//</code>内：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#! /usr/bin/perl</span></span><br><span class="line"><span class="keyword">use</span> v5.<span class="number">22</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">$_ = <span class="string">&quot;yabba dabba doo&quot;</span>;</span><br><span class="line"><span class="keyword">if</span> (<span class="regexp">/ba da/</span>) &#123; <span class="comment"># Does match</span></span><br><span class="line"> <span class="keyword">print</span> <span class="string">&quot;It matched!\n&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>而对于一般的变量，则使用<code>=~</code>进行匹配：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$string =~ <span class="regexp">/pattern/</span>;</span><br></pre></td></tr></table></figure>

<p>perl的正则匹配默认是left most的，它会从左往右检查字符串，遇到第一个匹配的模式直接返回结果。</p>
<p>此外，正则表达式是大小写敏感的：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#! /usr/bin/perl</span></span><br><span class="line"><span class="keyword">use</span> v5.<span class="number">22</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span>( &lt;STDIN&gt; ) &#123;</span><br><span class="line"> <span class="keyword">chomp</span>;</span><br><span class="line"> <span class="keyword">if</span> ( <span class="regexp">/fred/</span> ) &#123;</span><br><span class="line"> <span class="keyword">print</span> <span class="string">&quot;\tMatches\n&quot;</span>;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">else</span> &#123;</span><br><span class="line"> <span class="keyword">print</span> <span class="string">&quot;\tDoesn&#x27;t match\n&quot;</span>;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/2024/05/08/LearnPerl/image-60.png"></p>
<h3 id="通配"><a href="#通配" class="headerlink" title="通配"></a>通配</h3><p><code>.</code>符号可以匹配除了换行符以外的任何单个字符。</p>
<p>如果需要匹配一个真正的点号，则需要用反斜杠进行转义：<code>\.</code></p>
<p>同理为了匹配反斜杠，需要转义反斜杠本身：<code>\\</code>。</p>
<p><code> \N</code>也能达到和点号相同的效果。</p>
<h3 id="量词"><a href="#量词" class="headerlink" title="量词"></a>量词</h3><p><code>?</code>表示前面的符号出现1次或0次。<br><code>*</code>表示前面的符号出现0次或多次。</p>
<p><code>.*</code>星号与点号搭配，即可表示出现0次或任意次数的任意字符，即可以匹配除了换号外的任意字符串。</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#! /usr/bin/perl</span></span><br><span class="line"><span class="keyword">use</span> v5.<span class="number">22</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span>( &lt;STDIN&gt; ) &#123;</span><br><span class="line"> <span class="keyword">chomp</span>;</span><br><span class="line"> <span class="keyword">if</span> ( <span class="regexp">/.*/</span> ) &#123;</span><br><span class="line"> <span class="keyword">print</span> <span class="string">&quot;\tMatches\n&quot;</span>;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">else</span> &#123;</span><br><span class="line"> <span class="keyword">print</span> <span class="string">&quot;\tDoesn&#x27;t match\n&quot;</span>;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><img src="/2024/05/08/LearnPerl/image-61.png"></p>
<p>同时，这种匹配是贪婪的，它会匹配尽量长的部分。</p>
<p>由于星号可以匹配0次或多次，因此<code>.*</code>可以匹配空字符。</p>
<p>与之不同的是<code>+</code>号，可以匹配1次或多次。</p>
<p>想要匹配特定次数，则可以使用数字加大括号的组合，例如：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$_ = <span class="string">&quot;yabbbba dabbba doo.&quot;</span>;</span><br><span class="line"><span class="keyword">if</span> (<span class="regexp">/ab&#123;3&#125;a/</span>) &#123;</span><br><span class="line"> <span class="keyword">print</span> <span class="string">&quot;It matched!\n&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>同理可以通过大括号规定重复次数的区间：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$_ = <span class="string">&quot;yabbbba dabbba doo.&quot;</span>;</span><br><span class="line"><span class="keyword">if</span> (<span class="regexp">/ab&#123;2,3&#125;a/</span>) &#123;</span><br><span class="line"> <span class="keyword">print</span> <span class="string">&quot;It matched!\n&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上述代码表示b出现2到3次，也可以只规定上界或下界中的一个，另一个自动设置为0和无穷。</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$_ = <span class="string">&quot;yabbbba dabbba doo.&quot;</span>;</span><br><span class="line"><span class="keyword">if</span> (<span class="regexp">/ab&#123;3,&#125;a/</span>) &#123;</span><br><span class="line"> <span class="keyword">print</span> <span class="string">&quot;It matched!\n&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>关于量词的总结如下：<br><img src="/2024/05/08/LearnPerl/image-62.png"></p>
<h3 id="模式分组"><a href="#模式分组" class="headerlink" title="模式分组"></a>模式分组</h3><p>量词只能作用于它前面一项，如果想让量词作用于多个字符，则可以通过小括号<code>()</code>对量词进行模式分组。</p>
<p>通过反斜杠加数字的办法可以和括号配合实现反向引用<code>\1</code>。反向引用是指前面的括号中匹配到的模式。例如：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$_ = <span class="string">&quot;abba&quot;</span>;</span><br><span class="line"><span class="keyword">if</span> (<span class="regexp">/(.)\1/</span>) &#123; <span class="comment"># matches &#x27;bb&#x27;</span></span><br><span class="line"> <span class="keyword">print</span> <span class="string">&quot;It matched same character next to itself!\n&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>可以匹配任何一个重复2次的相同字符。</p>
<p>反向引用不必紧跟着括号：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$_ = <span class="string">&quot;yabba dabba doo&quot;</span>;</span><br><span class="line"><span class="keyword">if</span> (<span class="regexp">/y(....) d\1/</span>) &#123;</span><br><span class="line"> <span class="keyword">print</span> <span class="string">&quot;It matched the same after y and d!\n&quot;</span>;</span><br></pre></td></tr></table></figure>

<p>在这里反斜杠后面的数字代表的是被匹配到的模式序号，而非重复的次数。被匹配到的顺序是按照左括号来计算的：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$_ = <span class="string">&quot;yabba dabba doo&quot;</span>;</span><br><span class="line"><span class="keyword">if</span> (<span class="regexp">/y((.)(.)\3\2) d\1/</span>) &#123;</span><br><span class="line"> <span class="keyword">print</span> <span class="string">&quot;It matched!\n&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上述表达的问题在于可能导致歧义：<code>\111</code>是代表第111个反向引用，还是第11个反向引用后加上数字1，还是第一个反向引用加上数字11？</p>
<p>perl会认为是第111个反向引用。</p>
<p>perl提供了一种消除歧义的方法是<code>\g&#123;N&#125;</code>来表示反向引用。</p>
<p>同时，引用的编号也可以为负数，相对反向引用，即基于当前位置向前计数得到的捕获模式：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> v5.<span class="number">10</span>;</span><br><span class="line"><span class="keyword">my</span> $str = <span class="string">&quot;abcabc&quot;</span>;</span><br><span class="line"><span class="keyword">if</span> ($str =~ <span class="regexp">/(a)(b)(c)\g&#123;-3&#125;\g&#123;-2&#125;\g&#123;-1&#125;/</span>) &#123;</span><br><span class="line">    <span class="keyword">print</span> <span class="string">&quot;Match found!\n&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="选择"><a href="#选择" class="headerlink" title="选择"></a>选择</h3>
    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Programming-Language/" rel="tag"># Programming Language</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2024/04/19/%E7%AC%A8%E5%8A%9E%E6%B3%95%E5%AD%A6C/" rel="prev" title="笨办法学C">
      <i class="fa fa-chevron-left"></i> 笨办法学C
    </a></div>
      <div class="post-nav-item">
    <a href="/2024/06/10/%E9%AB%98%E7%AD%89%E6%95%B0%E5%AD%97%E9%9B%86%E6%88%90%E7%94%B5%E8%B7%AF%E8%AE%BE%E8%AE%A1/" rel="next" title="高等数字集成电路设计">
      高等数字集成电路设计 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Learn-Perl"><span class="nav-number">1.</span> <span class="nav-text">Learn Perl</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#ch2-%E6%A0%87%E9%87%8F%E6%95%B0%E6%8D%AE"><span class="nav-number">1.1.</span> <span class="nav-text">ch2 标量数据</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AC%AC%E4%B8%80%E4%B8%AAHelloword-%E7%A8%8B%E5%BA%8F"><span class="nav-number">1.1.1.</span> <span class="nav-text">第一个Helloword 程序</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A0%87%E9%87%8F%E6%95%B0%E6%8D%AE"><span class="nav-number">1.1.2.</span> <span class="nav-text">标量数据</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%B6%E4%BB%96%E7%89%B9%E6%80%A7"><span class="nav-number">1.1.3.</span> <span class="nav-text">其他特性</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ch3-%E5%88%97%E8%A1%A8%E5%92%8C%E6%95%B0%E7%BB%84"><span class="nav-number">1.2.</span> <span class="nav-text">ch3 列表和数组</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B0%E7%BB%84array"><span class="nav-number">1.2.1.</span> <span class="nav-text">数组array</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#array"><span class="nav-number">1.2.2.</span> <span class="nav-text">array</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#push-pop-shift-unshift"><span class="nav-number">1.2.2.1.</span> <span class="nav-text">push,pop,shift,unshift</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#splice"><span class="nav-number">1.2.2.2.</span> <span class="nav-text">splice</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%95%B0%E7%BB%84%E5%86%85%E6%8F%92"><span class="nav-number">1.2.2.3.</span> <span class="nav-text">字符串数组内插</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#foreach"><span class="nav-number">1.2.2.4.</span> <span class="nav-text">foreach</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%BB%98%E8%AE%A4%E5%8F%98%E9%87%8F"><span class="nav-number">1.2.2.5.</span> <span class="nav-text">默认变量 $_</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#reverse-sort-each"><span class="nav-number">1.2.2.6.</span> <span class="nav-text">reverse,sort,each</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%97%E8%A1%A8%E4%B8%8A%E4%B8%8B%E6%96%87%E4%B8%8E%E6%A0%87%E9%87%8F%E4%B8%8A%E4%B8%8B%E6%96%87"><span class="nav-number">1.2.2.7.</span> <span class="nav-text">列表上下文与标量上下文</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%97%E8%A1%A8%E4%B8%8A%E4%B8%8B%E6%96%87%E4%B8%AD%E4%BD%BF%E7%94%A8%E6%A0%87%E9%87%8F%E8%A1%A8%E8%BE%BE%E5%BC%8F-%E5%BC%BA%E5%88%B6%E6%A0%87%E9%87%8F%E4%B8%8A%E4%B8%8B%E6%96%87"><span class="nav-number">1.2.2.8.</span> <span class="nav-text">列表上下文中使用标量表达式&amp;强制标量上下文</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%97%E8%A1%A8%E4%B8%8A%E4%B8%8B%E6%96%87%E4%B8%AD%E7%9A%84"><span class="nav-number">1.2.2.9.</span> <span class="nav-text">列表上下文中的&lt;STDIN&gt;</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B9%A0%E9%A2%98"><span class="nav-number">1.2.3.</span> <span class="nav-text">习题</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ch4-%E5%AD%90%E7%A8%8B%E5%BA%8F"><span class="nav-number">1.3.</span> <span class="nav-text">ch4 子程序</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8F%98%E9%87%8F%E4%BC%A0%E9%80%92"><span class="nav-number">1.3.0.1.</span> <span class="nav-text">变量传递</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AD%90%E7%A8%8B%E5%BA%8F%E4%B8%AD%E7%9A%84%E7%A7%81%E6%9C%89%E5%8F%98%E9%87%8F"><span class="nav-number">1.3.0.2.</span> <span class="nav-text">子程序中的私有变量</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#use-strict-%E7%BC%96%E8%AF%91%E6%8C%87%E4%BB%A4"><span class="nav-number">1.3.0.3.</span> <span class="nav-text">use strict 编译指令</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%BF%94%E5%9B%9E-return"><span class="nav-number">1.3.0.4.</span> <span class="nav-text">返回 return</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%9C%81%E7%95%A5-%E7%AC%A6%E5%8F%B7"><span class="nav-number">1.3.0.5.</span> <span class="nav-text">省略&amp;符号</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%9D%9E%E6%A0%87%E9%87%8F%E8%BE%93%E5%87%BA"><span class="nav-number">1.3.0.6.</span> <span class="nav-text">非标量输出</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%8C%81%E7%BB%AD%E5%8F%98%E9%87%8F"><span class="nav-number">1.3.0.7.</span> <span class="nav-text">持续变量</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AD%90%E5%87%BD%E6%95%B0%E7%AD%BE%E5%90%8Dsubroutine-signatures"><span class="nav-number">1.3.0.8.</span> <span class="nav-text">子函数签名subroutine signatures</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B9%A0%E9%A2%98-1"><span class="nav-number">1.3.1.</span> <span class="nav-text">习题</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ch5-%E8%BE%93%E5%85%A5-%E8%BE%93%E5%87%BA"><span class="nav-number">1.4.</span> <span class="nav-text">ch5 输入&#x2F;输出</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A0%87%E5%87%86%E8%BE%93%E5%85%A5%E6%B5%81"><span class="nav-number">1.4.1.</span> <span class="nav-text">标准输入流</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%92%BB%E7%9F%B3%E7%AC%A6%E5%8F%B7"><span class="nav-number">1.4.1.1.</span> <span class="nav-text">钻石符号&lt;&gt;</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8F%8C%E9%92%BB%E7%9F%B3%E7%AC%A6%E5%8F%B7"><span class="nav-number">1.4.1.2.</span> <span class="nav-text">双钻石符号 &lt;&lt;&gt;&gt;</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%B0%83%E7%94%A8%E5%8F%82%E6%95%B0%E5%88%97%E8%A1%A8"><span class="nav-number">1.4.1.3.</span> <span class="nav-text">调用参数列表</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%A0%87%E5%87%86%E8%BE%93%E5%87%BA"><span class="nav-number">1.4.1.4.</span> <span class="nav-text">标准输出</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%8B%AC%E5%8F%B7"><span class="nav-number">1.4.1.5.</span> <span class="nav-text">括号</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%A0%BC%E5%BC%8F%E5%8C%96%E8%BE%93%E5%87%BAprintf"><span class="nav-number">1.4.1.6.</span> <span class="nav-text">格式化输出printf</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%97%E8%A1%A8%E4%B8%8Eprintf"><span class="nav-number">1.4.1.7.</span> <span class="nav-text">列表与printf</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%87%E4%BB%B6%E5%8F%A5%E6%9F%84-filehandles"><span class="nav-number">1.4.2.</span> <span class="nav-text">文件句柄 filehandles</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%A0%BC%E5%BC%8Fbinmode"><span class="nav-number">1.4.3.</span> <span class="nav-text">二进制格式binmode</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BB%93%E6%9D%9F%E5%8F%A5%E6%9F%84"><span class="nav-number">1.4.3.1.</span> <span class="nav-text">结束句柄</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#die%E7%94%A8%E4%BA%8E%E5%A4%84%E7%90%86%E8%87%B4%E5%91%BD%E9%94%99%E8%AF%AF"><span class="nav-number">1.4.3.2.</span> <span class="nav-text">die用于处理致命错误</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%96%87%E4%BB%B6%E5%8F%A5%E6%9F%84%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="nav-number">1.4.3.3.</span> <span class="nav-text">文件句柄的使用</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%87%8D%E6%96%B0%E6%89%93%E5%BC%80%E6%96%87%E4%BB%B6%E5%8F%A5%E6%9F%84"><span class="nav-number">1.4.3.4.</span> <span class="nav-text">重新打开文件句柄</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%A0%87%E9%87%8F%E5%8F%98%E9%87%8F%E7%9A%84%E5%8F%A5%E6%9F%84"><span class="nav-number">1.4.3.5.</span> <span class="nav-text">标量变量的句柄</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B9%A0%E9%A2%98-2"><span class="nav-number">1.4.4.</span> <span class="nav-text">习题</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ch6-%E5%93%88%E5%B8%8C"><span class="nav-number">1.5.</span> <span class="nav-text">ch6 哈希</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A6%82%E5%BF%B5"><span class="nav-number">1.5.1.</span> <span class="nav-text">概念</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%AE%AD%E5%A4%B4%E7%AC%A6%E5%8F%B7"><span class="nav-number">1.5.1.1.</span> <span class="nav-text">箭头符号 &#x3D;&gt;</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%93%88%E5%B8%8C%E5%87%BD%E6%95%B0"><span class="nav-number">1.5.2.</span> <span class="nav-text">哈希函数</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#keys-%E5%92%8C-values"><span class="nav-number">1.5.2.1.</span> <span class="nav-text">keys 和 values</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#each%E5%87%BD%E6%95%B0"><span class="nav-number">1.5.2.2.</span> <span class="nav-text">each函数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#exist-delete%E5%92%8C%E5%86%85%E6%8F%92"><span class="nav-number">1.5.2.3.</span> <span class="nav-text">exist, delete和内插</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><span class="nav-number">1.5.2.4.</span> <span class="nav-text">环境变量</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B9%A0%E9%A2%98-3"><span class="nav-number">1.5.3.</span> <span class="nav-text">习题</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ch7-%E6%BC%AB%E6%B8%B8%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="nav-number">1.6.</span> <span class="nav-text">ch7 漫游正则表达式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%9A%84%E6%A6%82%E5%BF%B5"><span class="nav-number">1.6.1.</span> <span class="nav-text">正则表达式的概念</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%9A%E9%85%8D"><span class="nav-number">1.6.2.</span> <span class="nav-text">通配</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%87%8F%E8%AF%8D"><span class="nav-number">1.6.3.</span> <span class="nav-text">量词</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A8%A1%E5%BC%8F%E5%88%86%E7%BB%84"><span class="nav-number">1.6.4.</span> <span class="nav-text">模式分组</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%89%E6%8B%A9"><span class="nav-number">1.6.5.</span> <span class="nav-text">选择</span></a></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Wang xianke</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">8</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">7</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/Wangxianke123" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;Wangxianke123" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:yourname@gmail.com" title="E-Mail → mailto:yourname@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Wang xianke</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="站点总字数">129k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">3:55</span>
</div>

        








      </div>
      <script src="https://Wangxianke123.github.io/live2d/autoload.js"></script>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

  

</body>

</html>
